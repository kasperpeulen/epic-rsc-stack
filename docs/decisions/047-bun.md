# Bun Runtime

Date: 2026-01-07

Status: accepted

## Context

Epic Stack uses Node.js as its JavaScript runtime. For Epic RSC Stack, we evaluated modern alternatives that could provide better developer experience and performance.

Bun is a modern JavaScript runtime built from scratch using JavaScriptCore (Safari's JS engine) instead of V8. It's designed as a drop-in replacement for Node.js with significant performance improvements:

- **~28x faster script execution** compared to npm (6ms overhead vs 170ms)
- **Faster process spawning** - `spawnSync` benchmarks show ~40% improvement over Node.js
- **Faster postMessage** - optimized serialization provides 2-240x improvement depending on payload size
- **All-in-one toolkit** - includes package manager, bundler, test runner, and transpiler
- **Native TypeScript support** - no compilation step needed
- **Node.js compatibility** - implements ~90% of Node-API functions, `fs`, `path`, `Buffer`, and most Node.js globals

Bun's package manager is particularly fast, using hardlinks and a global cache to minimize disk usage and installation time.

## Decision

Use Bun as the JavaScript runtime and package manager for Epic RSC Stack.

All commands use `bun` instead of `npm`/`node`:
- `bun run dev` - Start development server
- `bun run build` - Production build
- `bun run typecheck` - Type checking
- `bun test` - Run tests (when configured)

## Consequences

**Benefits:**
- Faster development iteration with quicker script execution and package installation
- Simpler toolchain with built-in TypeScript support
- Native test runner available (`bun test`) as alternative to Vitest
- Reduced dependencies since Bun includes bundler and transpiler

**Trade-offs:**
- Bun is newer and less battle-tested than Node.js in production
- Some Node.js APIs may not be fully compatible
- Team members need to install Bun (`curl -fsSL https://bun.sh/install | bash`)
- Fly.io deployment needs Bun-compatible Docker image

**Migration:**
- Replace `npm` commands with `bun` in documentation and scripts
- Use `bun.lock` instead of `package-lock.json`
- Monitor for any Node.js compatibility issues during development
